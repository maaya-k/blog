{{- /* Custom head partial for improved metadata, SEO, social sharing, and favicon/manifest support. */ -}}

<link href="https://gmpg.org/xfn/11" rel="profile">
<meta charset="utf-8">
{{ hugo.Generator }}

<!-- Mobile -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

{{- /* Title */ -}}
{{- $title := cond .IsHome .Site.Title (printf "%s · %s" .Title .Site.Title) -}}
<title>{{ $title }}</title>

{{- /* Description (prefers page params → .Description → .Summary → site param) */ -}}
{{- $desc := .Params.description
    | default .Description
    | default (.Summary | plainify | truncate 160)
    | default .Site.Params.description -}}
<meta name="description" content="{{ $desc }}">

<!-- Open Graph -->
<meta property="og:type" content="{{ if .IsPage }}article{{ else }}website{{ end }}">
<meta property="og:site_name" content="{{ .Site.Title }}">
<meta property="og:title" content="{{ .Title | default .Site.Title }}">
<meta property="og:description" content="{{ $desc }}">
<meta property="og:url" content="{{ .Permalink }}">

{{- /* Social image: first from .Params.images, else .Params.featured_image, else fallback */ -}}
{{- $ogimg := "" -}}
{{- with .Params.images }}{{ $ogimg = (index . 0) | absURL }}{{ end -}}
{{- with .Params.featured_image }}{{ $ogimg = . | absURL }}{{ end -}}
{{- if not $ogimg }}{{ $ogimg = ("/og-image.png" | absURL) }}{{ end -}}
<meta property="og:image" content="{{ $ogimg }}">

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{ .Title | default .Site.Title }}">
<meta name="twitter:description" content="{{ $desc }}">
<meta name="twitter:image" content="{{ $ogimg }}">

<!-- Canonical -->
<link rel="canonical" href="{{ .Permalink }}">

<!-- Author / Dates -->
{{ with .Params.author }}<meta name="author" content="{{ . }}">{{ end }}
{{ with .Date }}<meta property="article:published_time" content="{{ .Format "2006-01-02T15:04:05Z07:00" }}">{{ end }}
{{ with .Lastmod }}<meta property="article:modified_time" content="{{ .Format "2006-01-02T15:04:05Z07:00" }}">{{ end }}

<!-- CSS -->
{{ partialCached "head_css.html" "" "" }}

<!-- Favicons / Manifest -->
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="shortcut icon" href="/favicon.ico">

<!-- Feeds -->
{{- range .AlternativeOutputFormats -}}
  {{- printf `<link href="%s" rel="%s" type="%s" title="%s">` .Permalink .Rel .MediaType.Type $.Site.Title | safeHTML -}}
{{- end -}}

{{ partial "hook_head_end.html" . }}

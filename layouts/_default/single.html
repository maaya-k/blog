{{ define "main" -}}

<div class="post">
  <h1 style="margin-bottom:0.3em;">{{ .Title }}</h1>

  <time datetime="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}" class="post-date locale-date" style="display:block;margin-bottom:0.5em;color:#b0a990;font-size:1em;">{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}</time>

  {{ if .Params.tags }}
  <div class="post-tags" style="margin-bottom:1.2em;">
    {{ range $tag := .Params.tags }}
      <a class="tag-badge" href="{{ "/tags/" | relLangURL }}{{ $tag | urlize }}/">{{ $tag }}</a>
    {{ end }}
  </div>
  {{ end }}

  {{ .Content }}
</div>

{{ if .Site.Config.Services.Disqus.Shortname -}}
<h2>Comments</h2>
{{ template "_internal/disqus.html" . }}
{{- end }}

<script>
  document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('.locale-date').forEach(function(el) {
      var d = new Date(el.getAttribute('datetime'));
      if (!isNaN(d)) {
        el.textContent = d.toLocaleDateString(undefined, { year: 'numeric', month: 'long', day: 'numeric' });
      }
    });
  });
</script>
{{- end }}
